<!DOCTYPE html>
<html>
<head>
    <title>Mobile Touch Test - Deployd Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            background: #fafafa;
        }
        .name, .path {
            cursor: pointer;
            padding: 5px;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        .name:hover, .path:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        .touch-active {
            border: dashed 1px #000 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            color: white !important;
            padding: 5px !important;
        }
        .mobile-edit-input {
            border-radius: 3px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            font-size: 14px !important;
            border: 1px solid #007acc;
            padding: 4px 8px;
        }
        .mobile-edit-input:focus {
            outline: none;
            border-color: #007acc !important;
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);
        }
        .instructions {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .status {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Mobile Touch Test</h1>

        <div class="instructions">
            <h3>Instructions:</h3>
            <ul>
                <li><strong>Desktop:</strong> Hover over the name/path fields to see the editing interface</li>
                <li><strong>Mobile:</strong> Tap on the name/path fields to edit them</li>
                <li>Press Enter or tap outside to save changes</li>
            </ul>
        </div>

        <div class="test-item">
            <h4>Resource Configuration</h4>
            <p><strong>Name:</strong> <span class="name">my-resource</span></p>
            <p><strong>Path:</strong> <span class="path">/api/users</span></p>
        </div>

        <div class="test-item">
            <h4>Database Settings</h4>
            <p><strong>Name:</strong> <span class="name">database-config</span></p>
            <p><strong>Path:</strong> <span class="path">/config/db</span></p>
        </div>

        <div class="status" id="status">
            Changes saved successfully!
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Mobile touch event handlers
            function setupMobileTouchHandlers() {
                $(document).on('touchstart', '.name, .path', function(e) {
                    var $element = $(this);

                    // Prevent default to avoid text selection
                    e.preventDefault();

                    // Add visual feedback for touch
                    $element.addClass('touch-active');

                    // Create input field for editing
                    var currentText = $element.text();
                    var $input = $('<input type="text" class="mobile-edit-input" value="' + currentText + '" />');

                    // Style the input
                    $input.css({
                        'position': 'absolute',
                        'top': $element.offset().top,
                        'left': $element.offset().left,
                        'width': $element.outerWidth(),
                        'height': $element.outerHeight(),
                        'background': '#fff',
                        'color': '#000',
                        'border': '1px solid #007acc',
                        'padding': '2px 4px',
                        'font-size': $element.css('font-size'),
                        'font-family': $element.css('font-family'),
                        'z-index': '1000'
                    });

                    // Add input to body
                    $('body').append($input);
                    $input.focus();

                    // Handle input events
                    $input.on('blur keydown', function(e) {
                        if (e.type === 'blur' || e.keyCode === 13) {
                            var newValue = $input.val();

                            // Update the element text
                            $element.text(newValue);

                            // Remove touch-active class
                            $element.removeClass('touch-active');

                            // Remove input
                            $input.remove();

                            // Show status if changed
                            if (newValue !== currentText) {
                                $('#status').show().delay(2000).fadeOut();
                            }
                        }
                    });
                });
            }

            // Desktop hover handlers (for comparison)
            $('.name, .path').hover(
                function() {
                    if (!$(this).hasClass('touch-active')) {
                        $(this).css({
                            'border': 'dashed 1px #000',
                            'background': 'rgba(0, 0, 0, 0.1)',
                            'padding': '5px'
                        });
                    }
                },
                function() {
                    if (!$(this).hasClass('touch-active')) {
                        $(this).css({
                            'border': '',
                            'background': '',
                            'padding': ''
                        });
                    }
                }
            );

            // Initialize mobile handlers
            setupMobileTouchHandlers();

            // Show device type
            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (isMobile) {
                $('.instructions').prepend('<p><strong>Device detected: Mobile</strong></p>');
            } else {
                $('.instructions').prepend('<p><strong>Device detected: Desktop</strong></p>');
            }
        });
    </script>
</body>
</html>
